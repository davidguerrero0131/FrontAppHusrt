<div class="card border-0 shadow-sm rounded-0 mb-4 bg-white">
    <app-mantenimientoadminnavbar></app-mantenimientoadminnavbar>
</div>

<div class="fade-in-animation">
    <div class="container-fluid px-5 mb-3">
        <button pButton icon="pi pi-arrow-left" label="Volver al Servicio" (click)="backToDashboard()"
            class="p-button-text"></button>
    </div>

    <div class="dashboard-container">
        <div class="text-center mb-5">
            <h1 class="text-3xl font-bold mb-2">Reportes de Mantenimiento</h1>
            <h2 class="text-xl text-primary font-semibold" *ngIf="nombreArea">Área: {{ nombreArea }}</h2>
            <p class="text-secondary text-lg">Historial de reportes realizados a esta área.</p>
        </div>

        <div class="card" *ngIf="reportes.length > 0; else noData">
            <p-table [value]="reportes" [rows]="10" [paginator]="true" [tableStyle]="{ 'min-width': '50rem' }">
                <ng-template pTemplate="header">
                    <tr>
                        <th pSortableColumn="fecha">Fecha <p-sortIcon field="fecha"></p-sortIcon></th>
                        <th pSortableColumn="tipoReporte">Tipo <p-sortIcon field="tipoReporte"></p-sortIcon></th>
                        <th pSortableColumn="nombre">Elemento/Activo <p-sortIcon field="nombre"></p-sortIcon></th>
                        <th pSortableColumn="tipoMantenimiento">Mantenimiento <p-sortIcon
                                field="tipoMantenimiento"></p-sortIcon></th>
                        <th pSortableColumn="realizadoPor">Realizado Por <p-sortIcon field="realizadoPor"></p-sortIcon>
                        </th>
                        <th style="text-align: center">Acciones</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-reporte>
                    <tr>
                        <td>{{ reporte.fecha | date:'dd/MM/yyyy' }}</td>
                        <td>{{ reporte.tipoReporte }}</td>
                        <td>{{ reporte.nombre }}</td>
                        <td>
                            <p-tag [severity]="reporte.tipoMantenimiento === 'Preventivo' ? 'success' : 'warning'"
                                [value]="reporte.tipoMantenimiento">
                            </p-tag>
                        </td>
                        <td>{{ reporte.realizadoPor }}</td>
                        <td style="text-align: center">
                            <button pButton icon="pi pi-eye" class="p-button-rounded p-button-info p-button-text"
                                (click)="verReporte(reporte.id)" pTooltip="Ver Detalle"></button>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>

        <ng-template #noData>
            <div class="card">
                <div class="text-center p-4">
                    <i class="pi pi-folder-open text-500 mb-2" style="font-size: 2rem"></i>
                    <div class="text-500 font-medium">No se encontraron reportes para esta área.</div>
                </div>
            </div>
        </ng-template>
    </div>
</div>