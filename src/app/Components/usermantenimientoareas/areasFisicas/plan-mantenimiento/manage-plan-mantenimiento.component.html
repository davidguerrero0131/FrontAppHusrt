<div class="card p-4 shadow-2 border-round-lg">
    <div class="flex align-items-center gap-2 mb-4">
        <p-button icon="pi pi-arrow-left" label="Volver" styleClass="p-button-secondary p-button-text"
            (click)="cancelar()" pTooltip="Volver al listado" tooltipPosition="bottom"></p-button>
        <h2 class="text-primary font-bold m-0">{{ isEditMode ? 'Editar' : 'Nuevo' }} Plan de Mantenimiento</h2>
    </div>

    <form [formGroup]="planForm" (ngSubmit)="guardar()" class="grid">

        <!-- Área -->
        <div class="col-12 md:col-6 mb-3">
            <label for="area" class="block text-900 font-medium mb-2">Área Física</label>
            <p-dropdown id="area" [options]="areas" formControlName="areaId" optionLabel="nombre" optionValue="id"
                placeholder="Seleccione un área" [filter]="true" filterBy="nombre" styleClass="w-full" appendTo="body"
                [ngClass]="{'ng-invalid ng-dirty': planForm.get('areaId')?.invalid && planForm.get('areaId')?.touched}"></p-dropdown>
            <small class="p-error" *ngIf="planForm.get('areaId')?.invalid && planForm.get('areaId')?.touched">
                El área es requerida.
            </small>
        </div>

        <!-- Responsable -->
        <div class="col-12 md:col-6 mb-3">
            <label for="responsable" class="block text-900 font-medium mb-2">Responsable</label>
            <input pInputText id="responsable" formControlName="responsable" class="w-full"
                placeholder="Nombre del responsable"
                [ngClass]="{'ng-invalid ng-dirty': planForm.get('responsable')?.invalid && planForm.get('responsable')?.touched}" />
            <small class="p-error" *ngIf="planForm.get('responsable')?.invalid && planForm.get('responsable')?.touched">
                El responsable es requerido.
            </small>
        </div>

        <!-- Actividad -->
        <div class="col-12 mb-3">
            <label for="actividad" class="block text-900 font-medium mb-2">Actividad</label>
            <input pInputText id="actividad" formControlName="actividad" class="w-full"
                placeholder="Descripción de la actividad"
                [ngClass]="{'ng-invalid ng-dirty': planForm.get('actividad')?.invalid && planForm.get('actividad')?.touched}" />
            <small class="p-error" *ngIf="planForm.get('actividad')?.invalid && planForm.get('actividad')?.touched">
                La actividad es requerida.
            </small>
        </div>

        <!-- Periodo (Mes y Año) -->
        <div class="col-12 md:col-6 mb-3">
            <label for="mes" class="block text-900 font-medium mb-2">Mes</label>
            <p-dropdown id="mes" [options]="meses" formControlName="mes" optionLabel="label" optionValue="value"
                placeholder="Seleccione mes" styleClass="w-full" appendTo="body"></p-dropdown>
        </div>
        <div class="col-12 md:col-6 mb-3">
            <label for="anio" class="block text-900 font-medium mb-2">Año</label>
            <p-dropdown id="anio" [options]="anios" formControlName="anio" optionLabel="label" optionValue="value"
                styleClass="w-full" appendTo="body"></p-dropdown>
        </div>

        <!-- Rango de Días -->
        <div class="col-12 md:col-6 mb-3">
            <label for="diaInicio" class="block text-900 font-medium mb-2">Día Inicio (1-31)</label>
            <p-inputNumber id="diaInicio" formControlName="diaRangoInicio" [min]="1" [max]="31" styleClass="w-full"
                [showButtons]="true" buttonLayout="horizontal"></p-inputNumber>
        </div>
        <div class="col-12 md:col-6 mb-3">
            <label for="diaFin" class="block text-900 font-medium mb-2">Día Fin (1-31)</label>
            <p-inputNumber id="diaFin" formControlName="diaRangoFin" [min]="1" [max]="31" styleClass="w-full"
                [showButtons]="true" buttonLayout="horizontal"></p-inputNumber>
        </div>


        <!-- Botones -->
        <div class="col-12 flex justify-content-end gap-2 mt-4">
            <button pButton type="button" label="Cancelar" icon="pi pi-times"
                class="p-button-outlined p-button-secondary" (click)="cancelar()"></button>
            <button pButton type="submit" label="Guardar" icon="pi pi-save" class="p-button-primary"
                [disabled]="planForm.invalid"></button>
        </div>

    </form>
</div>