<div class="card p-4">
    <div class="flex align-items-center gap-2 mb-4">
        <p-button icon="pi pi-arrow-left" label="Volver" styleClass="p-button-secondary p-button-text"
            (click)="volver()" pTooltip="Volver al listado" tooltipPosition="bottom"></p-button>
        <h2 class="m-0">Gestión de Asignación de Elementos</h2>
    </div>

    <div class="grid">
        <div class="col-12 md:col-6 mb-4">
            <label class="block font-bold mb-2">Seleccione Área</label>
            <p-dropdown [options]="areas" [(ngModel)]="selectedArea" optionLabel="nombre" [filter]="true"
                filterBy="nombre" placeholder="Seleccione un área" (onChange)="onAreaChange()" styleClass="w-full"
                appendTo="body"></p-dropdown>
        </div>
    </div>

    <div class="mt-4" *ngIf="selectedArea">
        <p-card header="Seleccione los elementos disponibles" subheader="Marque los elementos que posee esta área">
            <div class="grid p-fluid">
                <div class="col-12 sm:col-6 md:col-4 lg:col-3 xl:col-2" *ngFor="let elemento of allElementos">
                    <div
                        class="field-checkbox h-full p-3 border-1 surface-border border-round flex align-items-center surface-card hover:surface-hover cursor-pointer">
                        <p-checkbox #cb [value]="elemento" [(ngModel)]="selectedElementos"
                            [inputId]="'el-' + elemento.id"></p-checkbox>
                        <label [for]="'el-' + elemento.id" class="ml-2 cursor-pointer font-medium w-full">{{
                            elemento.nombre }}</label>
                    </div>
                </div>
            </div>

            <div *ngIf="allElementos.length === 0" class="text-center p-4">
                <span class="text-500">No hay elementos activos creados en el sistema.</span>
            </div>

            <ng-template pTemplate="footer">
                <div class="flex justify-content-end gap-2">
                    <p-button label="Cancelar" icon="pi pi-times" styleClass="p-button-secondary"
                        (click)="volver()"></p-button>
                    <p-button label="Guardar Asignaciones" icon="pi pi-save" (click)="guardar()"></p-button>
                </div>
            </ng-template>
        </p-card>
    </div>

    <div *ngIf="!selectedArea"
        class="flex flex-column align-items-center justify-content-center p-5 surface-50 border-round">
        <i class="pi pi-info-circle text-5xl text-500 mb-3"></i>
        <span class="text-xl text-500">Seleccione un área para gestionar sus elementos.</span>
    </div>

</div>