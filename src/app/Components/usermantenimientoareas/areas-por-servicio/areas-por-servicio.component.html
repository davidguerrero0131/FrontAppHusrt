<div class="card border-0 shadow-sm rounded-0 mb-4 bg-white">
    <app-mantenimientoadminnavbar></app-mantenimientoadminnavbar>
</div>

<div class="fade-in-animation">
    <div class="container-fluid px-5 mb-3">
        <button pButton icon="pi pi-arrow-left" label="Volver a Servicios" (click)="backToDashboard()"
            class="p-button-text"></button>
    </div>

    <div class="dashboard-container">
        <div class="text-center mb-5">
            <h1 class="text-3xl font-bold mb-2">Áreas Físicas - {{ servicioSeleccionado?.nombres }}</h1>
            <p class="text-secondary text-lg">Listado de áreas físicas asociadas al servicio.</p>
        </div>

        <!-- Check if we have areas -->
        <div class="card" *ngIf="areasFisicas.length > 0; else noData">
            <p-table [value]="areasFisicas" [rows]="10" [paginator]="true" [tableStyle]="{ 'min-width': '50rem' }">
                <ng-template pTemplate="header">
                    <tr>
                        <th pSortableColumn="nombre">Nombre <p-sortIcon field="nombre"></p-sortIcon></th>
                        <th pSortableColumn="descripcion">Descripción <p-sortIcon field="descripcion"></p-sortIcon></th>
                        <th pSortableColumn="ubicacion">Ubicación <p-sortIcon field="ubicacion"></p-sortIcon></th>
                        <th pSortableColumn="estado">Estado <p-sortIcon field="estado"></p-sortIcon></th>
                        <th style="text-align: center">Opciones</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-area>
                    <tr>
                        <td class="font-bold">{{ area.nombre }}</td>
                        <td>{{ area.descripcion }}</td>
                        <td>
                            <span class="p-tag p-tag-rounded"
                                [ngClass]="{'bg-cyan-500': area.ubicacion === 'Torre 1', 'bg-orange-500': area.ubicacion === 'Torre 2'}">
                                {{ area.ubicacion || 'N/A' }}
                            </span>
                        </td>
                        <td>
                            <p-tag [severity]="(area.estado === 1 || area.estado === true) ? 'success' : 'danger'"
                                [value]="(area.estado === 1 || area.estado === true) ? 'Activo' : 'Inactivo'">
                            </p-tag>
                        </td>
                        <td style="text-align: center">
                            <button pButton icon="pi pi-cog" styleClass="p-button-secondary p-button-text"
                                (click)="setMenuArea(area); menu.toggle($event)"></button>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
            <p-menu #menu [model]="items" [popup]="true" appendTo="body"></p-menu>
        </div>

        <ng-template #noData>
            <div class="card">
                <div class="text-center p-4">
                    <i class="pi pi-building text-500 mb-2" style="font-size: 2rem"></i>
                    <div class="text-500 font-medium">No hay áreas registradas en este servicio.</div>
                </div>
            </div>
        </ng-template>
    </div>
</div>